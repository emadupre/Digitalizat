import{r as o,j as O,R as j,d as R}from"./index-CGbC6Esm.js";import{P as U,d as k}from"./index-CAa_Huxo.js";function x(t,e,{checkForDefaultPrevented:n=!0}={}){return function(r){if(t==null||t(r),n===!1||!r.defaultPrevented)return e==null?void 0:e(r)}}function ce(t,e){const n=o.createContext(e),s=i=>{const{children:u,...a}=i,d=o.useMemo(()=>a,Object.values(a));return O.jsx(n.Provider,{value:d,children:u})};s.displayName=t+"Provider";function r(i){const u=o.useContext(n);if(u)return u;if(e!==void 0)return e;throw new Error(`\`${i}\` must be used within \`${t}\``)}return[s,r]}function ae(t,e=[]){let n=[];function s(i,u){const a=o.createContext(u),d=n.length;n=[...n,u];const c=v=>{var b;const{scope:l,children:E,...h}=v,p=((b=l==null?void 0:l[t])==null?void 0:b[d])||a,y=o.useMemo(()=>h,Object.values(h));return O.jsx(p.Provider,{value:y,children:E})};c.displayName=i+"Provider";function f(v,l){var p;const E=((p=l==null?void 0:l[t])==null?void 0:p[d])||a,h=o.useContext(E);if(h)return h;if(u!==void 0)return u;throw new Error(`\`${v}\` must be used within \`${i}\``)}return[c,f]}const r=()=>{const i=n.map(u=>o.createContext(u));return function(a){const d=(a==null?void 0:a[t])||i;return o.useMemo(()=>({[`__scope${t}`]:{...a,[t]:d}}),[a,d])}};return r.scopeName=t,[s,$(r,...e)]}function $(...t){const e=t[0];if(t.length===1)return e;const n=()=>{const s=t.map(r=>({useScope:r(),scopeName:r.scopeName}));return function(i){const u=s.reduce((a,{useScope:d,scopeName:c})=>{const v=d(i)[`__scope${c}`];return{...a,...v}},{});return o.useMemo(()=>({[`__scope${e.scopeName}`]:u}),[u])}};return n.scopeName=e.scopeName,n}var S=globalThis!=null&&globalThis.document?o.useLayoutEffect:()=>{},z=j.useId||(()=>{}),K=0;function ue(t){const[e,n]=o.useState(z());return S(()=>{t||n(s=>s??String(K++))},[t]),t||(e?`radix-${e}`:"")}function P(t){const e=o.useRef(t);return o.useEffect(()=>{e.current=t}),o.useMemo(()=>(...n)=>{var s;return(s=e.current)==null?void 0:s.call(e,...n)},[])}function de({prop:t,defaultProp:e,onChange:n=()=>{}}){const[s,r]=X({defaultProp:e,onChange:n}),i=t!==void 0,u=i?t:s,a=P(n),d=o.useCallback(c=>{if(i){const v=typeof c=="function"?c(t):c;v!==t&&a(v)}else r(c)},[i,t,r,a]);return[u,d]}function X({defaultProp:t,onChange:e}){const n=o.useState(t),[s]=n,r=o.useRef(s),i=P(e);return o.useEffect(()=>{r.current!==s&&(i(s),r.current=s)},[s,r,i]),n}function Y(t,e=globalThis==null?void 0:globalThis.document){const n=P(t);o.useEffect(()=>{const s=r=>{r.key==="Escape"&&n(r)};return e.addEventListener("keydown",s,{capture:!0}),()=>e.removeEventListener("keydown",s,{capture:!0})},[n,e])}var q="DismissableLayer",w="dismissableLayer.update",G="dismissableLayer.pointerDownOutside",J="dismissableLayer.focusOutside",M,_=o.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),Q=o.forwardRef((t,e)=>{const{disableOutsidePointerEvents:n=!1,onEscapeKeyDown:s,onPointerDownOutside:r,onFocusOutside:i,onInteractOutside:u,onDismiss:a,...d}=t,c=o.useContext(_),[f,v]=o.useState(null),l=(f==null?void 0:f.ownerDocument)??(globalThis==null?void 0:globalThis.document),[,E]=o.useState({}),h=R(e,m=>v(m)),p=Array.from(c.layers),[y]=[...c.layersWithOutsidePointerEventsDisabled].slice(-1),b=p.indexOf(y),L=f?p.indexOf(f):-1,B=c.layersWithOutsidePointerEventsDisabled.size>0,D=L>=b,F=H(m=>{const C=m.target,T=[...c.branches].some(g=>g.contains(C));!D||T||(r==null||r(m),u==null||u(m),m.defaultPrevented||a==null||a())},l),A=ee(m=>{const C=m.target;[...c.branches].some(g=>g.contains(C))||(i==null||i(m),u==null||u(m),m.defaultPrevented||a==null||a())},l);return Y(m=>{L===c.layers.size-1&&(s==null||s(m),!m.defaultPrevented&&a&&(m.preventDefault(),a()))},l),o.useEffect(()=>{if(f)return n&&(c.layersWithOutsidePointerEventsDisabled.size===0&&(M=l.body.style.pointerEvents,l.body.style.pointerEvents="none"),c.layersWithOutsidePointerEventsDisabled.add(f)),c.layers.add(f),I(),()=>{n&&c.layersWithOutsidePointerEventsDisabled.size===1&&(l.body.style.pointerEvents=M)}},[f,l,n,c]),o.useEffect(()=>()=>{f&&(c.layers.delete(f),c.layersWithOutsidePointerEventsDisabled.delete(f),I())},[f,c]),o.useEffect(()=>{const m=()=>E({});return document.addEventListener(w,m),()=>document.removeEventListener(w,m)},[]),O.jsx(U.div,{...d,ref:h,style:{pointerEvents:B?D?"auto":"none":void 0,...t.style},onFocusCapture:x(t.onFocusCapture,A.onFocusCapture),onBlurCapture:x(t.onBlurCapture,A.onBlurCapture),onPointerDownCapture:x(t.onPointerDownCapture,F.onPointerDownCapture)})});Q.displayName=q;var V="DismissableLayerBranch",Z=o.forwardRef((t,e)=>{const n=o.useContext(_),s=o.useRef(null),r=R(e,s);return o.useEffect(()=>{const i=s.current;if(i)return n.branches.add(i),()=>{n.branches.delete(i)}},[n.branches]),O.jsx(U.div,{...t,ref:r})});Z.displayName=V;function H(t,e=globalThis==null?void 0:globalThis.document){const n=P(t),s=o.useRef(!1),r=o.useRef(()=>{});return o.useEffect(()=>{const i=a=>{if(a.target&&!s.current){let d=function(){W(G,n,c,{discrete:!0})};const c={originalEvent:a};a.pointerType==="touch"?(e.removeEventListener("click",r.current),r.current=d,e.addEventListener("click",r.current,{once:!0})):d()}else e.removeEventListener("click",r.current);s.current=!1},u=window.setTimeout(()=>{e.addEventListener("pointerdown",i)},0);return()=>{window.clearTimeout(u),e.removeEventListener("pointerdown",i),e.removeEventListener("click",r.current)}},[e,n]),{onPointerDownCapture:()=>s.current=!0}}function ee(t,e=globalThis==null?void 0:globalThis.document){const n=P(t),s=o.useRef(!1);return o.useEffect(()=>{const r=i=>{i.target&&!s.current&&W(J,n,{originalEvent:i},{discrete:!1})};return e.addEventListener("focusin",r),()=>e.removeEventListener("focusin",r)},[e,n]),{onFocusCapture:()=>s.current=!0,onBlurCapture:()=>s.current=!1}}function I(){const t=new CustomEvent(w);document.dispatchEvent(t)}function W(t,e,n,{discrete:s}){const r=n.originalEvent.target,i=new CustomEvent(t,{bubbles:!1,cancelable:!0,detail:n});e&&r.addEventListener(t,e,{once:!0}),s?k(r,i):r.dispatchEvent(i)}function te(t,e){return o.useReducer((n,s)=>e[n][s]??n,t)}var ne=t=>{const{present:e,children:n}=t,s=se(e),r=typeof n=="function"?n({present:s.isPresent}):o.Children.only(n),i=R(s.ref,re(r));return typeof n=="function"||s.isPresent?o.cloneElement(r,{ref:i}):null};ne.displayName="Presence";function se(t){const[e,n]=o.useState(),s=o.useRef({}),r=o.useRef(t),i=o.useRef("none"),u=t?"mounted":"unmounted",[a,d]=te(u,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return o.useEffect(()=>{const c=N(s.current);i.current=a==="mounted"?c:"none"},[a]),S(()=>{const c=s.current,f=r.current;if(f!==t){const l=i.current,E=N(c);t?d("MOUNT"):E==="none"||(c==null?void 0:c.display)==="none"?d("UNMOUNT"):d(f&&l!==E?"ANIMATION_OUT":"UNMOUNT"),r.current=t}},[t,d]),S(()=>{if(e){let c;const f=e.ownerDocument.defaultView??window,v=E=>{const p=N(s.current).includes(E.animationName);if(E.target===e&&p&&(d("ANIMATION_END"),!r.current)){const y=e.style.animationFillMode;e.style.animationFillMode="forwards",c=f.setTimeout(()=>{e.style.animationFillMode==="forwards"&&(e.style.animationFillMode=y)})}},l=E=>{E.target===e&&(i.current=N(s.current))};return e.addEventListener("animationstart",l),e.addEventListener("animationcancel",v),e.addEventListener("animationend",v),()=>{f.clearTimeout(c),e.removeEventListener("animationstart",l),e.removeEventListener("animationcancel",v),e.removeEventListener("animationend",v)}}else d("ANIMATION_END")},[e,d]),{isPresent:["mounted","unmountSuspended"].includes(a),ref:o.useCallback(c=>{c&&(s.current=getComputedStyle(c)),n(c)},[])}}function N(t){return(t==null?void 0:t.animationName)||"none"}function re(t){var s,r;let e=(s=Object.getOwnPropertyDescriptor(t.props,"ref"))==null?void 0:s.get,n=e&&"isReactWarning"in e&&e.isReactWarning;return n?t.ref:(e=(r=Object.getOwnPropertyDescriptor(t,"ref"))==null?void 0:r.get,n=e&&"isReactWarning"in e&&e.isReactWarning,n?t.props.ref:t.props.ref||t.ref)}export{Q as D,ne as P,S as a,x as b,ae as c,ce as d,de as e,ue as f,P as u};
